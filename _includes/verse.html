<hr>
<blockquote style="font-size: 1em; text-align: center; line-height: 1.6;">
  {% assign verse_clean = include.verse | strip %}
  {% assign verse_lines = verse_clean | split: '
' %}

  {%- for line in verse_lines -%}
    {% assign words = line | split: " " %}
    {%- for word in words -%}
      {% assign parts = word | split: "|" %}
      {% if parts.size > 1 %}
        {%- assign alt_text = parts[1] | replace: "_", " " -%}
        <span class="toggle-text" data-original="{{ parts[0] }}" data-alt="{{ alt_text }}">{{ parts[0] }}</span>
      {% else %}
        {{ word }}
      {% endif %}
      &nbsp;
    {%- endfor -%}
    <br>
  {%- endfor -%}

  <!-- Right-aligned author + meter -->
  <div style="text-align: right; margin-top: 0.5em; font-size: 0.9em; margin-right: 2em;">
    — 
    {% assign authors = include.author | split: "," %}
    {% assign last_index = authors | size | minus: 1 %}
    {% for author_id in authors %}
      {% assign author_obj = site.data.authors[author_id] %}
      {% if author_obj.url %}
        <em><a href="{{ author_obj.url }}">{{ author_obj.name }}</a> ({{ author_obj.name_eng }})</em>
      {% else %}
        <em><a href="{{ '/authors/' | append: author_id | relative_url }}">{{ author_obj.name }}</a> ({{ author_obj.name_eng }})</em>
      {% endif %}
      {% if forloop.index0 != last_index %}, {% endif %}
    {% endfor %}

    {% if include.meter %}
      {% assign meter_obj = site.data.meters[include.meter] %}
      {% if meter_obj %}
        | <em><a href="{{ meter_obj.link }}">{{ meter_obj.name }}</a></em>
      {% endif %}
    {% endif %}
  </div>
</blockquote>

{% if include.anvaya %}
<details style="margin: 0.5em 2em; text-align: left; font-size: 0.95em;">
  <summary style="cursor: pointer; font-weight: bold;">अन्वयः</summary>
  <div style="margin-top: 0.3em;">
    {{ include.anvaya }}
  </div>
</details>
{% endif %}
<br>
